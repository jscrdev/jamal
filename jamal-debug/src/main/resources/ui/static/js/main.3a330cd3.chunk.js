(this["webpackJsonpjamal-debug-ui"]=this["webpackJsonpjamal-debug-ui"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){},114:function(e,t,n){},134:function(e,t,n){},136:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(22),i=n.n(s),c=(n(107),n(169)),l=(n(108),n(84)),o={},u=function(e){var t=r.useState;for(var n in e){var a=t(e[n]),s=Object(l.a)(a,2);o[n]=s[0],o["set"+n.charAt(0).toUpperCase()+n.slice(1)]=s[1]}return o},d=function(e){return o.showP?e.replaceAll("\n","\xb6\n"):e},j=n(1),p=function(e){var t=Object(j.jsx)(j.Fragment,{});if(0===e.length)return t;for(var n=e.split("\n"),r=0;r<n.length-1;r++){var a=n[r];t=Object(j.jsxs)(j.Fragment,{children:[t,a,Object(j.jsx)("br",{})]})}return t=Object(j.jsxs)(j.Fragment,{children:[t,n[n.length-1]]})},h=function(e){var t=e.text,n=e.macro,r=void 0===n?"":n,a=t.indexOf(r),s=a+r.length,i=d(-1===a?t:t.substr(0,a)),l=d(-1===a?"":r),o=d(-1===a?"":t.substr(s));return Object(j.jsxs)(c.a,{overflow:"auto",className:"Input_SourceCode",children:[p(i),Object(j.jsx)("div",{className:"red",children:p(l)}),p(o)]})},b=n(51),v=function(e){var t=e.children,n=e.hidden,r=e.id,a=e.other,s=void 0===a?"":a;return Object(j.jsx)("div",Object(b.a)(Object(b.a)({role:"tabpanel",hidden:n,id:r},s),{},{children:t}))},x=(n(56),function(e){var t=e.children,n=e.caption,r=e.reference,a=e.backgroundColor,s=void 0===a?"white":a;return Object(j.jsxs)("div",{className:"SimpleTextInput_Caption",style:{backgroundColor:s},children:[Object(j.jsx)("div",{className:"textbox_caption",style:{backgroundColor:s},children:n}),Object(j.jsx)("textarea",{className:"SimpleTextInput_TextArea",ref:r,style:{backgroundColor:s,width:"99%"},value:t})]})}),O=n(162),f=n(165),m=n(82),g=n.n(m),C=n(170),w=n(166),y=n(41),S=n.n(y),R=n(42),E=n.n(R),N=n(79),_=n.n(N),k=n(80),T=n.n(k),A=n(81),L=n.n(A),I=n(83),P=n.n(I),D=n(161),H=n(163),M=n(76),B=n.n(M),V=n(75),z=n.n(V),F=n(73),J=n.n(F),q=n(74),U=n.n(q),Y=(n(114),function(e){var t=e.message,n=Object(r.useMemo)((function(){switch(t){case"BEFORE":return Object(j.jsx)(J.a,{});case"AFTER":return Object(j.jsx)(U.a,{});case"DISCONNECTED":return Object(j.jsx)(z.a,{});case"RUN":return Object(j.jsx)(S.a,{});default:return Object(j.jsx)(E.a,{})}}),[t]);return Object(j.jsx)(D.a,{className:"TitleBar",children:Object(j.jsxs)(O.a,{container:!0,direction:"row",alignItems:"flex-start",justify:"space-between",children:[Object(j.jsx)(O.a,{item:!0,children:Object(j.jsx)(B.a,{})}),Object(j.jsx)(O.a,{item:!0,children:Object(j.jsx)(H.a,{variant:"h6",className:"title",children:"Jamal Debug"})}),Object(j.jsx)(O.a,{item:!0,children:n})]})})}),Q=n(31),W=n(43),X=n(32),G=n.n(X),K=n(46),Z=new function e(){var t=this;Object(W.a)(this,e),this.url="https://raw.githubusercontent.com/verhas/jamal/master/version.jim",this.lastRelease="",G.a.get(this.url).then((function(e){var n,r=Object(Q.a)((""+e.data).split("\n"));try{for(r.s();!(n=r.n()).done;){var a=n.value;0===a.search(/{@define\sLAST_RELEASE=(.*)}/)&&(t.lastRelease=a.substring(22,a.length-1))}}catch(s){r.e(s)}finally{r.f()}}))},$=function(){var e;return e=o.serverVersion===K.version?"Version: "+o.serverVersion:"Server version: "+o.serverVersion+", Client version: "+K.version,""===Z.lastRelease||Z.lastRelease===o.serverVersion&&Z.lastRelease===K.version||(e+=", Latest release: "+Z.lastRelease),e},ee=(n(134),n(167)),te=(n(65),function(e){var t,n=e.data,r=0,a=0;return Object(j.jsx)("div",{style:{height:"310px",width:"100%",marginTop:"10px",overflowY:"auto",backgroundColor:"lightyellow"},children:Object(j.jsxs)(ee.a,{celled:!0,size:"small",sortable:!0,striped:!0,style:{fontSize:"12px",backgroundColor:"lightyellow"},children:[Object(j.jsx)(ee.a.Header,{children:Object(j.jsxs)(ee.a.Row,{children:[Object(j.jsx)(ee.a.HeaderCell,{children:"n"}),Object(j.jsx)(ee.a.HeaderCell,{children:"L"}),Object(j.jsx)(ee.a.HeaderCell,{children:"macro"})]},0)}),((null===n||void 0===n||null===(t=n.macros)||void 0===t?void 0:t.macros)||[]).map((function(e){return a++,e.macros.map((function(e){return r++,Object(j.jsxs)(ee.a.Row,{children:[Object(j.jsx)(ee.a.Cell,{style:{width:30},children:r}),Object(j.jsx)(ee.a.Cell,{style:{width:30},children:a}),Object(j.jsx)(ee.a.Cell,{style:{width:"100%"},children:e})]},r)}))}))]})})}),ne=(n(136),function(e){var t,n,r,a=e.data,s=e.captionSetter,i=e.contentSetter,c=[],l=0,o=0,u=Object(Q.a)((null===a||void 0===a||null===(n=a.userDefined)||void 0===n?void 0:n.scopes)||[]);try{for(u.s();!(r=u.n()).done;){var d=r.value;l++;var p,h=Object(Q.a)(d||[]);try{for(h.s();!(p=h.n()).done;){var b,v,x=p.value;o++,c.push({name:x.id,params:null!==(b=null===x||void 0===x||null===(v=x.parameters)||void 0===v?void 0:v.join(","))&&void 0!==b?b:"",content:x.content})}}catch(O){h.e(O)}finally{h.f()}}}catch(O){u.e(O)}finally{u.f()}return o=0,l=0,Object(j.jsx)("div",{style:{height:"310px",width:"100%",marginTop:"10px",overflowY:"auto",backgroundColor:"#d2eaff"},children:Object(j.jsxs)(ee.a,{celled:!0,size:"small",sortable:!0,striped:!0,style:{fontSize:"12px",backgroundColor:"#d2eaff"},children:[Object(j.jsx)(ee.a.Header,{children:Object(j.jsxs)(ee.a.Row,{children:[Object(j.jsx)(ee.a.HeaderCell,{children:"n"}),Object(j.jsx)(ee.a.HeaderCell,{children:"L"}),Object(j.jsx)(ee.a.HeaderCell,{children:"macro"}),Object(j.jsx)(ee.a.HeaderCell,{children:"parameters"}),Object(j.jsx)(ee.a.HeaderCell,{children:"body"})]},0)}),((null===a||void 0===a||null===(t=a.userDefined)||void 0===t?void 0:t.scopes)||[]).map((function(e){return l++,e.map((function(e){var t,n,r;return o++,Object(j.jsxs)(ee.a.Row,{onClick:(r=o-1,function(){var e=c[r],t="{@define "+e.name+"("+e.params+")="+e.content+"}";s("macro definition"),i(t)}),children:[Object(j.jsx)(ee.a.Cell,{style:{width:30},children:o}),Object(j.jsx)(ee.a.Cell,{style:{width:30},children:l}),Object(j.jsx)(ee.a.Cell,{style:{width:100},children:e.id}),Object(j.jsx)(ee.a.Cell,{style:{width:200,overflowX:"auto"},children:null!==(t=null===e||void 0===e||null===(n=e.parameters)||void 0===n?void 0:n.join(","))&&void 0!==t?t:""}),Object(j.jsx)(ee.a.Cell,{style:{width:"100%"},children:e.content})]},o)}))}))]})})}),re=n(78),ae=n.n(re),se=new function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8080;Object(W.a)(this,e),this.port=8080,this.host="localhost",this.connection=function(){return"http://"+n.host+":"+n.port},this.post=function(e,t){return G.a.post(n.connection()+e,t)},this.get=function(e){return G.a.get(n.connection()+e)},this.run=function(e){return n.post("/run",e)},this.step=function(){return n.post("/step")},this.stepInto=function(){return n.post("/stepInto")},this.stepOut=function(){return n.post("/stepOut")},this.quit=function(){return n.post("/quit")},this.execute=function(e){return n.post("/execute",e)},this.all=function(e){return n.get("/all?"+e)},this.host=t,this.port=r}("localhost",8080),ie=ae.a.parse(window.location.search.substring(1)),ce=ie.port?""+ie.port:new URL(window.location.href).port;se.port=+ce;var le=se,oe=function e(){le.all("level&errors&input&output&inputBefore&processing&macros&userDefined&state&output&version").then((function(e){var t,n,r,a,s,i,c,l,u,d,j,p,h,b,v;o.setInputBefore(null!==(t=null===(n=e.data)||void 0===n?void 0:n.inputBefore)&&void 0!==t?t:""),o.setMacro(null!==(r=null===(a=e.data)||void 0===a?void 0:a.processing)&&void 0!==r?r:""),o.setOutput(null!==(s=null===(i=e.data)||void 0===i?void 0:i.output)&&void 0!==s?s:""),o.setStateMessage(null!==(c=null===(l=e.data)||void 0===l?void 0:l.state)&&void 0!==c?c:""),o.setLevel(null!==(u=null===(d=e.data)||void 0===d?void 0:d.level)&&void 0!==u?u:""),o.setServerVersion(null!==(j=null===(p=e.data)||void 0===p||null===(h=p.version)||void 0===h?void 0:h.version)&&void 0!==j?j:"unknown");var x=null!==(b=null===(v=e.data)||void 0===v?void 0:v.errors)&&void 0!==b?b:[];o.setErrors(x),2!==o.currentTabStop&&x.length&&(o.setEvalOutput(x.join("\n")),o.setResultCaption("execution errors")),o.setData(e.data)})).catch((function(t){var n;503===(null===t||void 0===t||null===(n=t.response)||void 0===n?void 0:n.status)?(o.setStateMessage("RUN"),setTimeout(e,500)):(o.setStateMessage("DISCONNECTED"),o.setInputBefore(""),o.setMacro(""),o.setOutput(""))}))},ue=function(e){e().then((function(){return oe()}))},de=function(){return ue(le.step)},je=function(){return ue(le.stepInto)},pe=function(){return ue(le.stepOut)},he=function(){return ue(le.quit)},be=(n(67),n(164)),ve=function(e){var t=e.onClick,n=e.caption,r=e.color,a=void 0===r?"default":r,s=e.disabled,i=void 0!==s&&s,c=e.children,l=21-n.length+"px";return Object(j.jsxs)(O.a,{item:!0,children:[Object(j.jsx)(be.a,{variant:"contained",onClick:t,color:a,disabled:i,children:c}),i?Object(j.jsx)(j.Fragment,{}):Object(j.jsx)("div",{style:{marginLeft:l,fontSize:"8pt"},children:n})]})},xe=(n(68),function(){var e="";return o.errors.length&&(e="Label_When_Errors"),Object(j.jsx)("div",{className:"Label_Label ".concat(e),children:""+o.level})}),Oe=function(e){var t=e.children,n=e.caption,r=d(""+t);return Object(j.jsxs)("div",{className:"SimpleTextInput_Caption",children:[Object(j.jsx)("div",{className:"textbox_caption",children:n}),Object(j.jsx)("textarea",{readOnly:!0,className:"SimpleTextInput_TextArea",value:r,style:{width:"99%"}})]})},fe=function(){return Object(j.jsx)(O.a,{item:!0,xs:6,children:Object(j.jsx)(f.a,{className:"App_Paper, App_Eval",children:Object(j.jsx)(Oe,{caption:o.resultCaption,children:o.evalOutput})})})},me=function(){u({data:{},inputBefore:"",errors:[],macro:"",output:"",level:"-",evalOutput:"",savedEvalOutput:"",resultCaption:"no result",savedResultCaption:"no result",showP:!0,stateMessage:"",serverVersion:"unknown",currentTabStop:0}),Object(r.useEffect)((function(){document.title="Jamal Debugger",oe()}),[]);var e=Object(r.useRef)({value:""}),t=Object(r.useRef)({value:""}),n=Object(j.jsx)(O.a,{container:!0,direction:"column",children:Object(j.jsxs)(O.a,{container:!0,direction:"row",justify:"space-around",alignContent:"center",children:[Object(j.jsx)(ve,{onClick:function(){return o.setShowP(!o.showP)},caption:"",children:"\xb6"}),Object(j.jsx)(ve,{onClick:oe,caption:"Refresh",children:Object(j.jsx)(_.a,{})}),Object(j.jsx)(ve,{onClick:function(){return function(e){var t;return le.run(""+(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.value)).then(oe)}(t)},caption:"Run",children:Object(j.jsx)(S.a,{})}),Object(j.jsx)(ve,{onClick:de,caption:"Step",children:Object(j.jsx)(E.a,{})}),Object(j.jsx)(ve,{onClick:je,caption:"Step In",children:Object(j.jsx)(T.a,{})}),Object(j.jsx)(ve,{onClick:pe,caption:"Step out",children:Object(j.jsx)(L.a,{})})]})}),a=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(O.a,{item:!0,xs:6,children:n}),Object(j.jsx)(O.a,{item:!0,xs:3,children:Object(j.jsx)(xe,{})}),Object(j.jsxs)(O.a,{container:!0,direction:"row",xs:3,justify:"space-around",alignItems:"flex-end",alignContent:"flex-end",children:[Object(j.jsx)(ve,{onClick:function(){return function(e){var t;return le.execute(""+(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.value)).then((function(e){if("object"!=typeof e.data){if(0===e.data.length){o.setEvalOutput("");var t="empty evaluation result";o.setResultCaption(t),o.setSavedEvalOutput(""),o.setSavedResultCaption(t)}else{var n=""+e.data,r="result";o.setEvalOutput(n),o.setResultCaption(r),o.setSavedEvalOutput(n),o.setSavedResultCaption(r)}document.title="Jamal Debugger"}else{var a,s;o.setEvalOutput((null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)+"\n"+(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.trace)),o.setResultCaption("error result"),document.title="Jamal Debugger (e)"}oe()}))}(e)},color:"primary",caption:"Evaluate",disabled:2!==o.currentTabStop,children:Object(j.jsx)(g.a,{})}),Object(j.jsx)(ve,{onClick:he,caption:"Quit",color:"secondary",children:Object(j.jsx)(P.a,{})})]})]}),s=Object(j.jsx)(f.a,{className:"App_Paper, App_MacroList",children:Object(j.jsx)(te,{data:o.data})}),i=Object(j.jsx)(f.a,{className:"App_Paper, App_MacroList",children:Object(j.jsx)(ne,{data:o.data,captionSetter:o.setResultCaption,contentSetter:o.setEvalOutput})}),c=Object(j.jsx)(O.a,{item:!0,xs:6,children:Object(j.jsxs)(f.a,{className:"App_Paper, run_input",children:[Object(j.jsx)("div",{style:{marginLeft:"30px",fontSize:"12pt"},children:"input"}),Object(j.jsx)(h,{text:o.inputBefore,macro:o.macro})]})}),l=Object(j.jsx)(O.a,{item:!0,xs:6,children:Object(j.jsxs)(f.a,{className:"App_Paper",children:[Object(j.jsx)("div",{style:{marginLeft:"30px",fontSize:"12pt"},children:"output"}),Object(j.jsx)(h,{text:o.output})]})}),d=Object(j.jsx)(f.a,{className:"App_Paper, App_Eval",children:Object(j.jsx)(x,{caption:"evaluate",reference:e,children:""})}),p=Object(j.jsx)(f.a,{className:"App_Paper, App_Eval",children:Object(j.jsx)(x,{caption:"breakpoints",reference:t,backgroundColor:"#ffe0e0",children:""})});return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)(O.a,{container:!0,direction:"row",children:Object(j.jsx)(Y,{message:o.stateMessage})}),Object(j.jsx)(O.a,{container:!0,direction:"row",children:a}),Object(j.jsxs)(O.a,{container:!0,direction:"row",spacing:2,style:{width:"100%"},justify:"space-around",children:[c,Object(j.jsxs)(O.a,{item:!0,xs:6,children:[Object(j.jsxs)(C.a,{value:o.currentTabStop,onChange:function(e,t){o.setCurrentTabStop(t),2!==t&&o.errors.length?(2===o.currentTabStop&&(o.setSavedEvalOutput(o.evalOutput),o.setSavedResultCaption(o.resultCaption)),o.setEvalOutput(o.errors.join("\n")),o.setResultCaption("execution errors")):(o.setEvalOutput(o.savedEvalOutput),o.setResultCaption(o.savedResultCaption))},className:"tab_panel",centered:!0,indicatorColor:"secondary",children:[Object(j.jsx)(w.a,{value:0,label:"built-in macros"}),Object(j.jsx)(w.a,{value:1,label:"user defined"}),Object(j.jsx)(w.a,{value:2,label:"evaluate"}),Object(j.jsx)(w.a,{value:3,label:"breakpoints"})]}),Object(j.jsx)(v,{id:"0",hidden:0!==o.currentTabStop,other:"",children:s}),Object(j.jsx)(v,{id:"1",hidden:1!==o.currentTabStop,other:"",children:i}),Object(j.jsx)(v,{id:"2",hidden:2!==o.currentTabStop,other:"",children:d}),Object(j.jsx)(v,{id:"3",hidden:3!==o.currentTabStop,other:"",children:p})]})]}),Object(j.jsxs)(O.a,{container:!0,direction:"row",spacing:2,style:{width:"100%"},justify:"space-around",children:[l,Object(j.jsx)(fe,{})]}),Object(j.jsx)(O.a,{container:!0,direction:"row",spacing:2,style:{width:"100%"},justify:"space-around",children:Object(j.jsx)(O.a,{item:!0,xs:12,children:Object(j.jsxs)("div",{className:"App_LicenseLine",children:["Peter Verhas 2021, Apache License 2.0, ",Object(j.jsx)("a",{href:"https://github.com/verhas/jamal",children:"https://github.com/verhas/jamal"}),", "+$()]})})})]})})};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(me,{})}),document.getElementById("root"))},46:function(e){e.exports=JSON.parse('{"name":"jamal-debug-ui","version":"1.7.9-SNAPSHOT","private":true,"dependencies":{"@material-ui/core":"^4.11.3","@material-ui/data-grid":"*","@material-ui/icons":"^4.11.2","@material/tab-bar":"^11.0.0","@testing-library/jest-dom":"^5.11.9","@testing-library/react":"^11.2.5","@testing-library/user-event":"^12.8.3","@types/jest":"^26.0.21","@types/node":"^12.20.6","@types/react":"^17.0.3","@types/react-dom":"^17.0.2","axios":"^0.21.1","material-design-icons":"^3.0.1","qs":"^6.5.2","query-string":"^4.3.4","react":"^17.0.1","react-dom":"^17.0.1","react-scripts":"4.0.3","semantic-ui-css":"^2.4.1","semantic-ui-react":"^2.0.3","typescript":"^4.2.3","web-vitals":"^1.1.1"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},56:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){}},[[141,1,2]]]);
//# sourceMappingURL=main.3a330cd3.chunk.js.map