(this["webpackJsonpjamal-debug-ui"]=this["webpackJsonpjamal-debug-ui"]||[]).push([[0],{104:function(e,t,n){},117:function(e,t,n){},120:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},165:function(e,t,n){},185:function(e,t,n){},187:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(27),i=n.n(s),l=(n(158),n(235)),c=(n(159),n(139)),o={},u=function(e){var t=r.useState;for(var n in e){var a=t(e[n]),s=Object(c.a)(a,2);o[n]=s[0],o["set"+n.charAt(0).toUpperCase()+n.slice(1)]=s[1]}return o},d=function(e){return o.showP?e.replaceAll("\n","\xb6\n"):e},j=n(2),p=function(e,t){if(0===e.length)return Object(j.jsx)(j.Fragment,{});var n=e.split("\n");return Object(j.jsxs)(j.Fragment,{children:[n.slice(0,-1).map((function(e){return Object(j.jsxs)("span",{style:{color:t},children:[e,Object(j.jsx)("br",{})]})})),Object(j.jsx)("span",{style:{color:t},children:n[n.length-1]})]})},v=function(e){var t=e.text,n=e.macro,r=void 0===n?"":n,a=t.indexOf(r),s=a+r.length,i=d(-1===a?t:t.substr(0,a)),c=d(-1===a?"":r),o=d(-1===a?"":t.substr(s));return Object(j.jsxs)(l.a,{overflow:"auto",className:"Input_SourceCode",children:[p(i,"black"),p(c,"red"),p(o,"black")]})},h=n(101),b=function(e){var t=e.children,n=e.hidden,r=e.id,a=e.other,s=void 0===a?"":a;return Object(j.jsx)("div",Object(h.a)(Object(h.a)({role:"tabpanel",hidden:n,id:r},s),{},{children:t}))},x=(n(104),function(e){var t=e.children,n=e.caption,r=e.reference,a=e.backgroundColor,s=void 0===a?"white":a;return Object(j.jsxs)("div",{className:"SimpleTextInput_Caption",style:{backgroundColor:s},children:[Object(j.jsx)("div",{className:"textbox_caption",style:{backgroundColor:s},children:n}),Object(j.jsx)("textarea",{className:"SimpleTextInput_TextArea",ref:r,style:{backgroundColor:s,width:"99%"},value:t,onChange:function(){}})]})}),O=n(229),f=n(231),m=n(137),y=n.n(m),g=n(236),C=n(232),w=n(77),S=n.n(w),L=n(78),A=n.n(L),N=n(134),R=n.n(N),k=n(135),E=n.n(k),T=n(136),_=n.n(T),D=n(138),I=n.n(D),B=n(228),P=n(230),H=n(130),M=n.n(H),U=n(129),V=n.n(U),z=n(127),F=n.n(z),J=n(128),q=n.n(J),Y=(n(165),function(e){var t=e.message,n=Object(r.useMemo)((function(){switch(t){case"BEFORE":return Object(j.jsx)(F.a,{});case"AFTER":return Object(j.jsx)(q.a,{});case"DISCONNECTED":return Object(j.jsx)(V.a,{});case"RUN":return Object(j.jsx)(S.a,{});default:return Object(j.jsx)(A.a,{})}}),[t]);return Object(j.jsx)(B.a,{className:"TitleBar",children:Object(j.jsxs)(O.a,{container:!0,direction:"row",alignItems:"flex-start",justify:"space-between",children:[Object(j.jsx)(O.a,{item:!0,children:Object(j.jsx)(M.a,{})}),Object(j.jsx)(O.a,{item:!0,children:Object(j.jsx)(P.a,{variant:"h6",className:"title",children:"Jamal Debug"})}),Object(j.jsx)(O.a,{item:!0,children:n})]})})}),Q=n(66),X=n(79),G=n(67),K=n.n(G),W=n(94),Z=new function e(){var t=this;Object(X.a)(this,e),this.url="https://raw.githubusercontent.com/verhas/jamal/master/version.jim",this.lastRelease="",K.a.get(this.url).then((function(e){var n,r=Object(Q.a)((""+e.data).split("\n"));try{for(r.s();!(n=r.n()).done;){var a=n.value;0===a.search(/{@define\sLAST_RELEASE=(.*)}/)&&(t.lastRelease=a.substring(22,a.length-1))}}catch(s){r.e(s)}finally{r.f()}}))},$=function(){var e;return e=o.serverVersion===W.version?"Version: "+o.serverVersion:"Server version: "+o.serverVersion+", Client version: "+W.version,""===Z.lastRelease||Z.lastRelease===o.serverVersion&&Z.lastRelease===W.version||(e+=", Latest release: "+Z.lastRelease),e},ee=(n(185),n(237)),te=(n(113),function(e){var t,n=e.data,r=0,a=0;return Object(j.jsx)("div",{style:{height:"310px",width:"100%",marginTop:"10px",overflowY:"auto",backgroundColor:"lightyellow"},children:Object(j.jsxs)(ee.a,{celled:!0,size:"small",sortable:!0,striped:!0,style:{fontSize:"12px",backgroundColor:"lightyellow"},children:[Object(j.jsx)(ee.a.Header,{children:Object(j.jsxs)(ee.a.Row,{children:[Object(j.jsx)(ee.a.HeaderCell,{children:"n"}),Object(j.jsx)(ee.a.HeaderCell,{children:"L"}),Object(j.jsx)(ee.a.HeaderCell,{children:"macro"})]},0)}),((null===n||void 0===n||null===(t=n.macros)||void 0===t?void 0:t.macros)||[]).map((function(e){return a++,e.macros.map((function(e){return r++,Object(j.jsxs)(ee.a.Row,{children:[Object(j.jsx)(ee.a.Cell,{style:{width:30},children:r}),Object(j.jsx)(ee.a.Cell,{style:{width:30},children:a}),Object(j.jsx)(ee.a.Cell,{style:{width:"100%"},children:e})]},r)}))}))]})})}),ne=(n(187),function(e){var t,n,r,a=e.data,s=e.captionSetter,i=e.contentSetter,l=[],c=Object(Q.a)((null===a||void 0===a||null===(n=a.userDefined)||void 0===n?void 0:n.scopes)||[]);try{for(c.s();!(r=c.n()).done;){var o,u=r.value,d=Object(Q.a)(u||[]);try{for(d.s();!(o=d.n()).done;){var p,v,h=o.value;l.push({name:h.id,params:null!==(p=null===h||void 0===h||null===(v=h.parameters)||void 0===v?void 0:v.join(","))&&void 0!==p?p:"",content:h.content})}}catch(O){d.e(O)}finally{d.f()}}}catch(O){c.e(O)}finally{c.f()}var b=0,x=0;return Object(j.jsx)("div",{style:{height:"310px",width:"100%",marginTop:"10px",overflowY:"auto",backgroundColor:"#d2eaff"},children:Object(j.jsxs)(ee.a,{celled:!0,size:"small",sortable:!0,striped:!0,style:{fontSize:"12px",backgroundColor:"#d2eaff"},children:[Object(j.jsx)(ee.a.Header,{children:Object(j.jsxs)(ee.a.Row,{children:[Object(j.jsx)(ee.a.HeaderCell,{children:"n"}),Object(j.jsx)(ee.a.HeaderCell,{children:"L"}),Object(j.jsx)(ee.a.HeaderCell,{children:"macro"}),Object(j.jsx)(ee.a.HeaderCell,{children:"parameters"}),Object(j.jsx)(ee.a.HeaderCell,{children:"body"})]},0)}),((null===a||void 0===a||null===(t=a.userDefined)||void 0===t?void 0:t.scopes)||[]).map((function(e){return x++,e.map((function(e){var t,n,r;return b++,Object(j.jsxs)(ee.a.Row,{onClick:(r=b-1,function(){var e=l[r],t="{@define "+e.name+"("+e.params+")="+e.content+"}";s("macro definition"),i(t)}),children:[Object(j.jsx)(ee.a.Cell,{style:{width:30},children:b}),Object(j.jsx)(ee.a.Cell,{style:{width:30},children:x}),Object(j.jsx)(ee.a.Cell,{style:{width:100},children:e.id}),Object(j.jsx)(ee.a.Cell,{style:{width:200,overflowX:"auto"},children:null!==(t=null===e||void 0===e||null===(n=e.parameters)||void 0===n?void 0:n.join(","))&&void 0!==t?t:""}),Object(j.jsx)(ee.a.Cell,{style:{width:"100%"},children:e.content})]},b)}))}))]})})}),re=n(132),ae=n.n(re),se=new function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8080;Object(X.a)(this,e),this.port=8080,this.host="localhost",this.connection=function(){return"http://"+n.host+":"+n.port},this.post=function(e,t){return K.a.post(n.connection()+e,t)},this.get=function(e){return K.a.get(n.connection()+e)},this.run=function(e){return n.post("/run",e)},this.step=function(){return n.post("/step")},this.stepInto=function(){return n.post("/stepInto")},this.stepOut=function(){return n.post("/stepOut")},this.quit=function(){return n.post("/quit")},this.execute=function(e){return n.post("/execute",e)},this.all=function(e){return n.get("/all?"+e)},this.host=t,this.port=r}("localhost",8080),ie=ae.a.parse(window.location.search.substring(1)),le=ie.port?""+ie.port:new URL(window.location.href).port;se.port=+le;var ce=se,oe=function e(){ce.all("level&errors&input&output&inputBefore&processing&macros&userDefined&state&output&version").then((function(e){var t,n,r,a,s,i,l,c,u,d,j,p,v,h,b,x,O,f;console.log(o);for(var m=+(null===(t=e.data)||void 0===t?void 0:t.level),y=[],g=0;g<o.inputBeforeArray.length&&g<m-1;g++)y[g]=o.inputBeforeArray[g];y[m-1]=null===(n=e.data)||void 0===n?void 0:n.inputBefore;for(var C=[],w=0;w<o.outputArray.length&&w<m-1;w++)C[w]=o.outputArray[w];C[m-1]=null===(r=e.data)||void 0===r?void 0:r.output,o.setDisplayedLevel(m),o.setInputBefore(null!==(a=null===(s=e.data)||void 0===s?void 0:s.inputBefore)&&void 0!==a?a:""),o.setInputBeforeArray(y),o.setMacro(null!==(i=null===(l=e.data)||void 0===l?void 0:l.processing)&&void 0!==i?i:""),o.setOutput(null!==(c=null===(u=e.data)||void 0===u?void 0:u.output)&&void 0!==c?c:""),o.setOutputArray(C),o.setStateMessage(null!==(d=null===(j=e.data)||void 0===j?void 0:j.state)&&void 0!==d?d:""),o.setLevel(null!==(p=null===(v=e.data)||void 0===v?void 0:v.level)&&void 0!==p?p:""),o.setServerVersion(null!==(h=null===(b=e.data)||void 0===b||null===(x=b.version)||void 0===x?void 0:x.version)&&void 0!==h?h:"unknown");var S=null!==(O=null===(f=e.data)||void 0===f?void 0:f.errors)&&void 0!==O?O:[];o.setErrors(S),2!==o.currentTabStop&&S.length&&(o.setEvalOutput(S.join("\n")),o.setResultCaption("execution errors")),o.setData(e.data)})).catch((function(t){var n;503===(null===t||void 0===t||null===(n=t.response)||void 0===n?void 0:n.status)?(o.setStateMessage("RUN"),setTimeout(e,500)):(o.setStateMessage("DISCONNECTED"),o.setInputBefore(""),o.setMacro(""),o.setOutput(""))}))},ue=function(e){e().then(oe)},de=function(){return ue(ce.step)},je=function(){return ue(ce.stepInto)},pe=function(){return ue(ce.stepOut)},ve=function(){return ue(ce.quit)},he=(n(117),n(234)),be=function(e){var t=e.onClick,n=e.caption,r=e.color,a=void 0===r?"default":r,s=e.disabled,i=void 0!==s&&s,l=e.children;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(he.a,{variant:"contained",onClick:t,color:a,disabled:i,children:[l,Object(j.jsx)("div",{style:{fontSize:"8pt"},children:n})]})})},xe=(n(120),function(){var e="";return o.errors.length&&(e="RedAsError"),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"left"},children:[Object(j.jsx)("div",{className:"LevelNumber ".concat(e),children:""+o.displayedLevel}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"LevelNumber LevelUpDown",onClick:function(){o.displayedLevel<o.level&&(o.setDisplayedLevel(o.displayedLevel+1),o.setInputBefore(o.inputBeforeArray[o.displayedLevel]||""),o.setOutput(o.outputArray[o.displayedLevel]||""))},children:Object(j.jsx)("div",{className:"LevelUpDownLabel LevelUpLabel",children:"+"})}),Object(j.jsx)("div",{className:"LevelNumber LevelUpDown",onClick:function(){o.displayedLevel>1&&(o.setDisplayedLevel(o.displayedLevel-1),o.setInputBefore(o.inputBeforeArray[o.displayedLevel-2]||""),o.setOutput(o.outputArray[o.displayedLevel-2]||""))},children:Object(j.jsx)("div",{className:"LevelUpDownLabel",children:"-"})})]})]})})}),Oe=function(e){var t=e.children,n=e.caption,r=d(""+t);return Object(j.jsxs)("div",{className:"SimpleTextInput_Caption",children:[Object(j.jsx)("div",{className:"textbox_caption",children:n}),Object(j.jsx)("textarea",{readOnly:!0,className:"SimpleTextInput_TextArea",value:r,style:{width:"99%"}})]})},fe=function(){return Object(j.jsx)(f.a,{className:"App_Paper, App_Eval",children:Object(j.jsx)(Oe,{caption:o.resultCaption,children:o.evalOutput})})},me=function(){u({data:{},inputBefore:"",inputBeforeArray:[],errors:[],macro:"",output:"",outputArray:[],level:"-",displayedLevel:0,evalOutput:"",savedEvalOutput:"",resultCaption:"no result",savedResultCaption:"no result",showP:!0,stateMessage:"",serverVersion:"unknown",currentTabStop:0}),Object(r.useEffect)((function(){document.title="Jamal Debugger",oe()}),[]);var e=Object(r.useRef)({value:""}),t=Object(r.useRef)({value:""}),n=Object(j.jsx)(O.a,{container:!0,direction:"column",children:Object(j.jsxs)(O.a,{container:!0,direction:"row",justify:"space-around",alignContent:"center",children:[Object(j.jsx)(be,{onClick:function(){return o.setShowP(!o.showP)},caption:"",children:"\xb6"}),Object(j.jsx)(be,{onClick:oe,caption:"Refresh",children:Object(j.jsx)(R.a,{})}),Object(j.jsx)(be,{onClick:function(){return function(e){var t;return ce.run(""+(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.value)).then(oe)}(t)},caption:"Run",children:Object(j.jsx)(S.a,{})}),Object(j.jsx)(be,{onClick:de,caption:"Step",children:Object(j.jsx)(A.a,{})}),Object(j.jsx)(be,{onClick:je,caption:"Step In",children:Object(j.jsx)(E.a,{})}),Object(j.jsx)(be,{onClick:pe,caption:"Step out",children:Object(j.jsx)(_.a,{})})]})}),a=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(O.a,{item:!0,xs:6,children:n}),Object(j.jsx)(O.a,{item:!0,xs:3,children:Object(j.jsx)(xe,{})}),Object(j.jsxs)(O.a,{container:!0,direction:"row",xs:3,justify:"space-around",alignItems:"flex-end",alignContent:"flex-end",children:[Object(j.jsx)(be,{onClick:function(){return function(e){var t;return ce.execute(""+(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.value)).then((function(e){if("object"!=typeof e.data){if(0===e.data.length){o.setEvalOutput("");var t="empty evaluation result";o.setResultCaption(t),o.setSavedEvalOutput(""),o.setSavedResultCaption(t)}else{var n=""+e.data,r="result";o.setEvalOutput(n),o.setResultCaption(r),o.setSavedEvalOutput(n),o.setSavedResultCaption(r)}document.title="Jamal Debugger"}else{var a,s;o.setEvalOutput((null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)+"\n"+(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.trace)),o.setResultCaption("error result"),document.title="Jamal Debugger (e)"}oe()}))}(e)},color:"blue",caption:"Evaluate",disabled:2!==o.currentTabStop,children:Object(j.jsx)(y.a,{})}),Object(j.jsx)(be,{onClick:ve,caption:"Quit",color:"red",children:Object(j.jsx)(I.a,{})})]})]}),s=Object(j.jsx)(f.a,{className:"App_Paper, App_MacroList",children:Object(j.jsx)(te,{data:o.data})}),i=Object(j.jsx)(f.a,{className:"App_Paper, App_MacroList",children:Object(j.jsx)(ne,{data:o.data,captionSetter:o.setResultCaption,contentSetter:o.setEvalOutput})}),l=Object(j.jsx)(O.a,{item:!0,xs:6,children:Object(j.jsxs)(f.a,{className:"App_Paper, run_input",children:[Object(j.jsx)("div",{style:{marginLeft:"30px",fontSize:"12pt"},children:"input"}),Object(j.jsx)(v,{text:o.inputBefore,macro:o.macro})]})}),c=Object(j.jsx)(O.a,{item:!0,xs:6,children:Object(j.jsxs)(f.a,{className:"App_Paper",children:[Object(j.jsx)("div",{style:{marginLeft:"30px",fontSize:"12pt"},children:"output"}),Object(j.jsx)(v,{text:o.output})]})}),d=Object(j.jsx)(f.a,{className:"App_Paper, App_Eval",children:Object(j.jsx)(x,{caption:"evaluate",reference:e,children:""})}),p=Object(j.jsx)(f.a,{className:"App_Paper, App_Eval",children:Object(j.jsx)(x,{caption:"breakpoints",reference:t,backgroundColor:"#ffe0e0",children:""})});return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)(O.a,{container:!0,direction:"row",children:Object(j.jsx)(Y,{message:o.stateMessage})}),Object(j.jsx)(O.a,{container:!0,direction:"row",children:a}),Object(j.jsxs)(O.a,{container:!0,direction:"row",spacing:2,style:{width:"100%"},justify:"space-around",children:[l,Object(j.jsxs)(O.a,{item:!0,xs:6,children:[Object(j.jsxs)(g.a,{value:o.currentTabStop,onChange:function(e,t){o.setCurrentTabStop(t),2!==t&&o.errors.length?(2===o.currentTabStop&&(o.setSavedEvalOutput(o.evalOutput),o.setSavedResultCaption(o.resultCaption)),o.setEvalOutput(o.errors.join("\n")),o.setResultCaption("execution errors")):(o.setEvalOutput(o.savedEvalOutput),o.setResultCaption(o.savedResultCaption))},className:"tab_panel",centered:!0,indicatorColor:"secondary",children:[Object(j.jsx)(C.a,{value:0,label:"built-in macros"}),Object(j.jsx)(C.a,{value:1,label:"user defined"}),Object(j.jsx)(C.a,{value:2,label:"evaluate"}),Object(j.jsx)(C.a,{value:3,label:"breakpoints"})]}),Object(j.jsx)(b,{id:"0",hidden:0!==o.currentTabStop,other:"",children:s}),Object(j.jsx)(b,{id:"1",hidden:1!==o.currentTabStop,other:"",children:i}),Object(j.jsx)(b,{id:"2",hidden:2!==o.currentTabStop,other:"",children:d}),Object(j.jsx)(b,{id:"3",hidden:3!==o.currentTabStop,other:"",children:p})]})]}),Object(j.jsxs)(O.a,{container:!0,direction:"row",spacing:2,style:{width:"100%"},justify:"space-around",children:[c,Object(j.jsx)(O.a,{item:!0,xs:6,children:Object(j.jsx)(fe,{})})]}),Object(j.jsx)(O.a,{container:!0,direction:"row",spacing:2,style:{width:"100%"},justify:"space-around",children:Object(j.jsx)(O.a,{item:!0,xs:12,children:Object(j.jsxs)("div",{className:"App_LicenseLine",children:["Peter Verhas 2021, Apache License 2.0, ",Object(j.jsx)("a",{href:"https://github.com/verhas/jamal",children:"https://github.com/verhas/jamal"}),", "+$()]})})})]})})};i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(me,{})}),document.getElementById("root"))},94:function(e){e.exports=JSON.parse('{"name":"jamal-debug-ui","version":"1.7.9-SNAPSHOT","private":true,"dependencies":{"@material-ui/core":"^4.11.3","@material-ui/data-grid":"*","@material-ui/icons":"^4.11.2","@material/tab-bar":"^11.0.0","@testing-library/jest-dom":"^5.11.9","@testing-library/react":"^11.2.5","@testing-library/user-event":"^12.8.3","@types/jest":"^26.0.21","@types/node":"^12.20.6","@types/react":"^17.0.3","@types/react-dom":"^17.0.2","axios":"^0.21.1","material-design-icons":"^3.0.1","qs":"^6.5.2","query-string":"^4.3.4","react":"^17.0.1","react-dom":"^17.0.1","react-scripts":"4.0.3","semantic-ui-css":"^2.4.1","semantic-ui-react":"^2.0.3","typescript":"^4.2.3","web-vitals":"^1.1.1"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')}},[[195,1,2]]]);
//# sourceMappingURL=main.f44cb93d.chunk.js.map